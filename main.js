(()=>{"use strict";var n={47:(n,t,e)=>{e.d(t,{A:()=>s});var a=e(601),i=e.n(a),r=e(314),o=e.n(r)()(i());o.push([n.id,".game-list ul {\n  list-style-type: none;\n  padding: 0;\n}\n\n.game-list li {\n  opacity: 0;\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 6px !important;\n  margin-top: 2px !important;\n  padding: 4px !important;\n  border-radius: 5px;\n  text-indent: 5px;\n}\n\n.game-list {\n  padding: 0 15px;\n}\n\n.explain-content {\n  line-height: 15px;\n  font-weight: bold;\n  margin-top: 20px;\n  color: #333;\n  background-color: rgba(0, 0, 0, 0.15);\n  padding: 10px;\n  border-radius: 5px;\n  position: relative;\n  margin-bottom: 15px;\n  /* 新增布局属性 */\n  flex-direction: column;\n  align-items: center;\n}\n\n.select-container {\n  position: absolute;\n  top: 10px;\n  right: 10px;\n  margin: 0;\n  z-index: 1;\n}\n\n.achievement-info {\n  font-size: 12px;\n  font-family: Microsoft Yahei, SimSun, NSimSun, SimHei;\n  background-color: rgba(0, 0, 0, 0.15);\n  padding: 10px;\n  border-radius: 5px;\n}\n\nli[onclick] {\n  cursor: pointer;\n}\n\n.flip-in {\n  animation: flipIn 0.2s forwards;\n}\n\n@keyframes flipIn {\n  0% {\n    transform: translate(200%, -500%) scale(4);\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n\n.quality-1 { background: linear-gradient(to right, rgba(168, 173, 192, 0.75), rgba(199, 220, 228, 0.4)); }\n.quality-2 { background: linear-gradient(to right, rgba(44, 96, 226, 0.75), rgba(29, 143, 255, 0.4)); }\n.quality-3 { background: linear-gradient(to right, rgba(139, 67, 232, 0.75), rgba(108, 59, 248, 0.4)); }\n.quality-4 { background: linear-gradient(to right, rgba(215, 158, 22, 0.75), rgba(242, 206, 40, 0.4)); }\n.quality-5 { background: linear-gradient(to right, rgba(233, 92, 176, 0.75), rgba(231, 107, 158, 0.4)); }\n.quality-6 { background: linear-gradient(to right, rgba(166, 203, 254, 0.75), rgba(167, 232, 254, 0.4)); }\n.quality-7 { background: linear-gradient(to right, rgba(26, 247, 90, 0.75), rgba(29, 23, 22, 0.4)); }\n\n#gameResult {\n  position: relative;\n  height: 30px;\n  overflow: hidden;\n  box-shadow: inset 2px 2px 2px 1px rgb(0, 0, 0);\n  border-radius: 8px;\n  margin-top: 15px;\n  transition: all 0.3s ease;\n  align-items: center;\n  width: 100%;\n}\n\n.scroll-container {\n  width: 100%;\n  height: 100%;\n  position: relative;\n  transition: none !important;\n  will-change: transform;\n}\n\n.scroll-container.init {\n  top: 50%;\n  transform: translateY(-50%);\n}\n\n.scroll-item {\n  font-size: 16px;\n  border-bottom: 1px solid #585858;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: background-color 0.3s;\n}\n\n#gameRollBtn {\n  margin-top: 15px;\n}\n\n#story {\n  min-height: 20px;\n  font-size: 14px;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n  white-space: pre-wrap;\n  word-break: break-word;\n  margin-top: 10px;\n}",""]);const s=o},56:(n,t,e)=>{n.exports=function(n){var t=e.nc;t&&n.setAttribute("nonce",t)}},66:(n,t,e)=>{e.d(t,{A:()=>s});var a=e(601),i=e.n(a),r=e(314),o=e.n(r)()(i());o.push([n.id,'/* article.css */\n\n#links-container {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 8px;\n    /* 缩小容器之间的间距 */\n}\n\n.link-preview {\n    flex: 0 1 calc(16.66% - 8px);\n    /* 每个链接占据容器的大约16.66%宽度，减去新的间隙，这样每行可以展示6个 */\n    box-sizing: border-box;\n\n}\n\n.link-container {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    /* 垂直居中 */\n    text-align: center;\n    cursor: pointer;\n    padding: 8px;\n    /* 减小内边距 */\n    transition: background-color 0.1s ease-in-out;\n}\n\n.link-title {\n    border: 1px solid transparent;\n    /* 初始状态下使用透明边框 */\n}\n\n.link-container:hover .link-title {\n    background-color: rgba(0, 2, 129, 1);\n    /* 鼠标悬停时的半透明蓝色背景 */\n    color: rgb(223, 223, 223);\n    /* 更改字体颜色为红色 (可以根据需要调整颜色) */\n    border: 1px dotted rgb(161, 161, 161);\n    /* 修改为虚线边框 */\n}\n\n.link-icon {\n    width: 48px;\n    /* 减小图标宽度 */\n    height: 48px;\n    /* 减小图标高度 */\n    background-size: cover;\n    /* 图标覆盖容器 */\n    margin-bottom: 0;\n    /* 去掉图标与标题之间的间距 */\n}\n\n.link-title {\n    font-family: "Pixelated MS Sans Serif", Arial, sans-serif;\n    font-size: 12px;\n    /* 减小字体大小 */\n    line-height: 1;\n    /* 减小行高 */\n    display: -webkit-box;\n    /* 创建一个弹性盒子 */\n    -webkit-box-orient: vertical;\n    /* 设置盒子为垂直方向 */\n    -webkit-line-clamp: 2;\n    /* 限制显示的行数为2行 */\n    overflow: hidden;\n    /* 超出部分隐藏 */\n    text-overflow: ellipsis;\n    /* 超出部分用省略号表示 */\n    max-width: 55px;\n    /* 减小最大宽度 */\n    user-select: none;\n    /* 阻止标题文本被选中 */\n}',""]);const s=o},72:n=>{var t=[];function e(n){for(var e=-1,a=0;a<t.length;a++)if(t[a].identifier===n){e=a;break}return e}function a(n,a){for(var r={},o=[],s=0;s<n.length;s++){var l=n[s],c=a.base?l[0]+a.base:l[0],d=r[c]||0,u="".concat(c," ").concat(d);r[c]=d+1;var p=e(u),g={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==p)t[p].references++,t[p].updater(g);else{var m=i(g,a);a.byIndex=s,t.splice(s,0,{identifier:u,updater:m,references:1})}o.push(u)}return o}function i(n,t){var e=t.domAPI(t);e.update(n);return function(t){if(t){if(t.css===n.css&&t.media===n.media&&t.sourceMap===n.sourceMap&&t.supports===n.supports&&t.layer===n.layer)return;e.update(n=t)}else e.remove()}}n.exports=function(n,i){var r=a(n=n||[],i=i||{});return function(n){n=n||[];for(var o=0;o<r.length;o++){var s=e(r[o]);t[s].references--}for(var l=a(n,i),c=0;c<r.length;c++){var d=e(r[c]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}r=l}}},113:n=>{n.exports=function(n,t){if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}},171:(n,t,e)=>{n.exports=e.p+"image/view-refresh.png"},190:(n,t,e)=>{e.d(t,{A:()=>p});var a=e(601),i=e.n(a),r=e(314),o=e.n(r),s=e(417),l=e.n(s),c=new URL(e(908),e.b),d=o()(i()),u=l()(c);d.push([n.id,`    .computer-fail-icon {\n        position: absolute;\n        bottom: 10px;\n        right: 10px;\n        width: 50px;\n        height: 50px; /* 确保高度与宽度一致 */\n        background-image: url(${u});\n        background-size: cover; /* 确保图片覆盖整个 div */\n        cursor: pointer; /* 添加鼠标指针样式 */\n    }`,""]);const p=d},211:(n,t,e)=>{e.d(t,{A:()=>s});var a=e(601),i=e.n(a),r=e(314),o=e.n(r)()(i());o.push([n.id,'.logo {\n    margin: 5% auto 1%;\n    cursor: pointer;\n    width: 768px;\n    height: 278px;\n    /* 增加外阴影提升立体感，调整内阴影透明度 */\n    border: rgb(177, 176, 176) 1px solid;\n    border-bottom: white 2px solid;\n    border-right: white 2px solid;\n    overflow: hidden;\n    position: relative;\n    /* 添加容器过渡效果 */\n    transition: box-shadow 0.3s ease;\n  }\n  \n  .logo .text-container {\n    font-family: "Courier New", Courier, monospace;\n    font-size: 14px;\n    white-space: pre;\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    margin: 0;\n    padding: 0;\n    line-height: 1;\n    \n    /* 修改为黑色文字及阴影 */\n    color: #000000;\n    text-shadow: \n      0 1px 1px rgba(255, 255, 255, 0.3),    /* 顶部反光 */\n      0 -1px 2px rgba(0, 0, 0, 0.4),         /* 底部投影 */\n      0 2px 4px rgba(0, 0, 0, 0.2);          /* 整体柔化阴影 */\n    \n    transition: \n      transform 0.08s cubic-bezier(0.8, 0.9, 0.8, 1),\n      text-shadow 0.3s ease;\n  }\n  \n  .logo .text-container:hover {\n    transform: translate(-50%, -50%) scale(1.08);\n    /* 悬停时增强立体阴影效果 */\n    text-shadow: \n      0 2px 2px rgba(255, 255, 255, 0.4),    /* 强化顶部反光 */\n      0 -2px 4px rgba(0, 0, 0, 0.6),         /* 加深底部投影 */\n      0 4px 8px rgba(0, 0, 0, 0.3),          /* 扩展整体阴影 */\n      0 0 12px rgba(0, 0, 0, 0.2);           /* 添加弥散阴影效果 */\n  }',""]);const s=o},215:(n,t,e)=>{n.exports=e.p+"image/border.png"},314:n=>{n.exports=function(n){var t=[];return t.toString=function(){return this.map((function(t){var e="",a=void 0!==t[5];return t[4]&&(e+="@supports (".concat(t[4],") {")),t[2]&&(e+="@media ".concat(t[2]," {")),a&&(e+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),e+=n(t),a&&(e+="}"),t[2]&&(e+="}"),t[4]&&(e+="}"),e})).join("")},t.i=function(n,e,a,i,r){"string"==typeof n&&(n=[[null,n,void 0]]);var o={};if(a)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(o[l]=!0)}for(var c=0;c<n.length;c++){var d=[].concat(n[c]);a&&o[d[0]]||(void 0!==r&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=r),e&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=e):d[2]=e),i&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=i):d[4]="".concat(i)),t.push(d))}},t}},417:n=>{n.exports=function(n,t){return t||(t={}),n?(n=String(n.__esModule?n.default:n),/^['"].*['"]$/.test(n)&&(n=n.slice(1,-1)),t.hash&&(n+=t.hash),/["'() \t\n]|(%20)/.test(n)||t.needQuotes?'"'.concat(n.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):n):n}},540:n=>{n.exports=function(n){var t=document.createElement("style");return n.setAttributes(t,n.attributes),n.insert(t,n.options),t}},601:n=>{n.exports=function(n){return n[1]}},659:n=>{var t={};n.exports=function(n,e){var a=function(n){if(void 0===t[n]){var e=document.querySelector(n);if(window.HTMLIFrameElement&&e instanceof window.HTMLIFrameElement)try{e=e.contentDocument.head}catch(n){e=null}t[n]=e}return t[n]}(n);if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(e)}},751:(n,t,e)=>{e.d(t,{A:()=>s});var a=e(601),i=e.n(a),r=e(314),o=e.n(r)()(i());o.push([n.id,"table {\n    border-top: 1px solid #333;\n    border-left: 1px solid #333;\n    border-spacing: 0;\n    background-color: #fff;\n    width: 100%;\n}\n\ntable td {\n    border-bottom: 1px solid #333;\n    border-right: 1px solid #333;\n    padding: 5px;\n}\n\n.xl65 {\n    color: rgb(34, 34, 34);\n}\n\n.table-icon {\n    width: 16px;\n    /* 设置图标宽度 */\n    height: 16px;\n    /* 设置图标高度 */\n    display: inline-block;\n    /* 使 div 作为块级元素 */\n    background-size: contain;\n    /* 保持图片比例 */\n    background-repeat: no-repeat;\n    /* 不重复背景 */\n    vertical-align: middle;\n    /* 垂直对齐 */\n}",""]);const s=o},825:n=>{n.exports=function(n){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=n.insertStyleElement(n);return{update:function(e){!function(n,t,e){var a="";e.supports&&(a+="@supports (".concat(e.supports,") {")),e.media&&(a+="@media ".concat(e.media," {"));var i=void 0!==e.layer;i&&(a+="@layer".concat(e.layer.length>0?" ".concat(e.layer):""," {")),a+=e.css,i&&(a+="}"),e.media&&(a+="}"),e.supports&&(a+="}");var r=e.sourceMap;r&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),t.styleTagTransform(a,n,t.options)}(t,n,e)},remove:function(){!function(n){if(null===n.parentNode)return!1;n.parentNode.removeChild(n)}(t)}}}},908:(n,t,e)=>{n.exports=e.p+"image/computer-fail.png"},915:(n,t,e)=>{e.d(t,{A:()=>x});var a=e(601),i=e.n(a),r=e(314),o=e.n(r),s=e(923),l=e(66),c=e(190),d=e(47),u=e(950),p=e(751),g=e(211),m=e(417),h=e.n(m),f=new URL(e(215),e.b),y=o()(i());y.i(s.A),y.i(l.A),y.i(c.A),y.i(d.A),y.i(u.A),y.i(p.A),y.i(g.A),y.push([n.id,"@import url(https://cdn.jsdmirror.com/npm/98.css@0.1.20/dist/98.min.css);"]);var b=h()(f);y.push([n.id,`/* 导入外部样式表 98.css */\n\n\n\n:root.css-loading body {\n  visibility: hidden;\n  opacity: 0;\n  transition: opacity 0.3s ease;\n}\n\n:root.css-loaded body {\n  visibility: visible;\n  opacity: 1;\n}\n\nbody {\n  height: 100%;\n  margin: 0; /* 去除默认边距 */\n  display: flex; /* 使用 Flexbox 布局 */\n  flex-direction: column; /* 主轴方向为垂直 */\n  align-items: center; /* 垂直居中对齐 */\n  justify-content: center; /* 水平居中对齐 */\n  background-color: #008080;\n}\n\n/* 保持其他部分不变 */\n\nmenu[role=tablist] > li {\n  font-family: "Pixelated MS Sans Serif", Arial, sans-serif;\n  font-weight: bold;\n  text-align: center;\n  width: 75px; /* 宽度 */\n  background-color: #C0C0C0; /* 背景色 */\n}\n\n.window {\n  padding: 2px;\n  transition: width 0.15s ease-in-out, height 0.15s ease-in-out; /* 宽度和高度的过渡效果 */\n  width: 768px; /* 宽度 */\n  max-width: 768px; /* 最大宽度 */\n  overflow: hidden; /* 溢出隐藏 */\n  margin: 0 auto; /* 水平居中 */\n  margin-bottom: 5px;\n}\n\n.window img {\n  border-image: url(${b}) 15 fill; /* 边框图像切片为15，46/3≈15 */\n  border-image-slice: 15; /* 切片大小为15，分成九宫格 */\n  border-image-width: 15px; /* 设置边框宽度 */\n  border-image-outset: 0; /* 不需要外延 */\n  background-color: transparent; /* 背景透明 */\n  padding: 3px; /* 内边距，保持图片在边框内 */\n  max-width: 95%; /* 最大宽度 */\n  height: auto; /* 高度自适应 */\n  border-style: solid; /* 设置边框样式 */\n}\n\n\n.status-bar {\n  background-color: #C0C0C0; /* 背景色 */\n  margin: 5px 0 2%; /* 上下外边距 */\n  padding: 2px; /* 内边距 */\n}\n\n.status-bar p {\n  font-family: "Pixelated MS Sans Serif", Arial, sans-serif;\n  font-size: 12px; /* 字体大小 */\n  padding: 2px; /* 内边距 */\n  white-space: pre-wrap;\n}\n\np, .window li, h1, h2, h3, h4, h5 {\n  line-height: 1.4; /* 行高 */\n  font-size: 14px; /* 字体大小 */\n  font-family: Microsoft Yahei, SimSun, NSimSun, SimHei; /* 字体系列 */\n  margin-bottom: 20px; /* 底部外边距 */\n}\n\nul.tree-view li {\n  margin-top: 1%; /* 顶部外边距 */\n  font-family: "Pixelated MS Sans Serif", Arial, Microsoft Yahei; /* 字体系列 */\n  font-size: 11px; /* 字体大小 */\n  line-height: 0.2 !important; /* 行高 */\n  text-decoration: underline dotted blue; /* 下划线样式 */\n}\n\nh1, h2, h3, h4, h5 {\n  font-weight: bold; /* 加粗 */\n}\n\nh1 { font-size: 30px; } /* 字体大小 */\nh2 { font-size: 25px; } /* 字体大小 */\nh3 { font-size: 20px; } /* 字体大小 */\nh4 { font-size: 18px; } /* 字体大小 */\nh5 { font-size: 16px; } /* 字体大小 */\n\ncode {\n  font-family: Microsoft Yahei, SimSun, NSimSun, SimHei; /* 字体系列 */\n  background-color: #f4f4f4; /* 背景色 */\n  padding: 2px; /* 内边距 */\n  margin: 0 5px; /* 左右外边距 */\n  border: 1px solid #ddd; /* 边框 */\n  border-radius: 4px; /* 圆角 */\n  font-size: 13px; /* 字体大小 */\n  color: #333; /* 字体颜色 */\n}\n\n.table-figure {\n  border-collapse: collapse; /* 边框合并 */\n  margin: 20px auto; /* 上下外边距，水平居中 */\n  font-size: 14px; /* 字体大小 */\n  overflow: auto; /* 溢出时显示滚动条 */\n}\n\n.back-to-top {\n  position: fixed; /* 固定定位 */\n  bottom: 20px; /* 底部距离 */\n  right: 20px; /* 右侧距离 */\n  margin-right: 10%; /* 右侧外边距 */\n  z-index: 99; /* 层级 */\n  display: none; /* 默认隐藏 */\n  text-align: center; /* 文本居中 */\n}\n\n@media (max-width: 768px) { /* 媒体查询，屏幕宽度小于768px时 */\n  .logo { margin: 5% auto 20px;  max-width: 375px;height: 136px; /* 最大宽度 */} /* 上下外边距 */\n  .window {\n    width: 100%; /* 宽度 */\n    max-width: 375px; /* 最大宽度 */\n    padding: 5px; /* 内边距 */\n  }\n  .window img { max-width: 100%; } /* 图片最大宽度 */\n  .status-bar { margin-bottom: 5%; } /* 底部外边距 */\n  p, .window li, h1, h2, h3, h4 {\n    font-size: 16px; /* 字体大小 */\n    margin-bottom: 10px; /* 底部外边距 */\n  }\n  code { font-size: 12px; } /* 代码字体大小 */\n  .table-figure { font-size: 12px; } /* 表格字体大小 */\n  .back-to-top { margin-right: 5%; } /* 右侧外边距 */\n}\n\n@keyframes fadeIn { /* 淡入动画 */\n  0%, 100% { opacity: 1; transform: scale(1) rotate(0deg); } /* 开始和结束状态 */\n  25%, 75% { opacity: 0.5; } /* 中间状态 */\n}\n\n.window.active { animation: fadeIn 0.15s ease-in-out; } /* 窗口激活时的动画 */\n\n.tips {\n  position: absolute; /* 绝对定位 */\n  font-family: "Pixelated MS Sans Serif", Arial, sans-serif;\n  line-height: 1.2;\n  background-color: #FFFFE1; /* 背景颜色 */\n  border: #000 1px solid; /* 边框 */\n  color: black; /* 字体颜色 */\n  padding: 3px 3px; /* 内边距 */\n  z-index: 9000; /* 确保在其他元素之上 */\n  transition: opacity 0.1s; /* 平滑过渡效果 */\n  opacity: 0; /* 初始状态不可见 */\n  white-space: normal; /* 允许换行 */\n  max-width: 160px; /* 可选：设置最大宽度以控制换行 */\n}\n.crt-effect {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 5000;\n  pointer-events: none;\n}`,""]);const x=y},923:(n,t,e)=>{e.d(t,{A:()=>p});var a=e(601),i=e.n(a),r=e(314),o=e.n(r),s=e(417),l=e.n(s),c=new URL(e(171),e.b),d=o()(i()),u=l()(c);d.push([n.id,`.progress-container {\n    position: relative; /* 使得绝对定位的子元素相对于该容器定位 */\n    background-color: #f3f3f3; /* 背景色可以根据需要调整 */\n    width: 100%;\n    height: 30px;\n    background-color: #C0C0C0;\n    overflow: hidden;\n    position: relative;\n    box-shadow: inset 0 2px 1px rgba(0, 0, 0, 0.5);\n    border: rgb(177, 176, 176) 1px solid;\n    border-bottom: white 2px solid;\n    border-right: white 2px solid;\n    margin-bottom: 10px;\n    margin-top: 12px;\n}\n\n.progress-bar {\n    padding: 3px;\n    height: 30px;\n    display: flex;\n    flex-wrap: wrap;\n    box-sizing: border-box;\n}\n\n.progress-bar .grid {\n    width: 28px;\n    height: 100%;\n    background-color: #0000A8;\n    margin-top: 1px;\n    margin-right: 2px;\n}\n\n#progress-percentage,\n#month-percentage,\n#day-percentage {\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n    color: #ffffff;\n    font-size: 15px;\n    font-weight: bold;\n    user-select: none;\n}\n\n.refresh-container {\n    display: none; /* 初始状态为隐藏 */\n    position: relative;\n    justify-content: flex-end; /* 水平方向上靠右对齐 */\n    align-items: center;\n}\n\n.refreshIcon {\n    background-image: url(${u});\n    width: 16px;\n    height: 16px;\n    margin-right: 5px;\n}\n\n#refresh-timer {\n    text-align: center;\n    font-size: 11px;\n    font-weight: bold;\n}\n\n.progress-text {\n    position: relative; /* 绝对定位 */\n    bottom: -8px; /* 距离顶部 */\n    left: 0; /* 距离左侧 */\n    font-size: 12px; /* 字体大小 */\n    color: #000; /* 字体颜色 */\n    padding: 5px; /* 内边距 */\n    font-weight: bold; /* 字体加粗 */\n}`,""]);const p=d},950:(n,t,e)=>{e.d(t,{A:()=>s});var a=e(601),i=e.n(a),r=e(314),o=e.n(r)()(i());o.push([n.id,".gallery-images {\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: center;\n    margin: 10px 0;\n    padding: 20px;\n}\n\n.gallery-images img {\n    max-width: 100%;\n    height: auto;\n    margin: 10px;\n    opacity: 0;\n    transition: opacity 0.5s;\n    cursor: pointer;\n}\n\n.navigation-bar {\n    display: flex;\n    justify-content: center;\n    margin-bottom: 20px;\n}\n\n#pageIndicator {\n    margin: 0 10px;\n}\n\n#titleSelect {\n    margin: 5px;\n}\n\n#topTitleDisplay {\n    text-align: center;\n    margin: 20px 0;\n    font-style: italic;\n}\n\n.modal {\n    display: flex;\n    position: fixed;\n    z-index: 100;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    background-color: rgba(0, 0, 0, 0.7);\n    align-items: center;  /* 垂直居中 */\n    justify-content: center; /* 水平居中 */\n}\n\n.modal-content {\n    max-width: 90%;\n    max-height: 85vh;\n    display: block;\n    margin: 0 auto; /* 确保margin为0，实现水平居中 */\n}\n\n.caption {\n    text-align: center;\n    color: rgb(0, 0, 0);\n    margin-top: 5px;\n    margin-bottom: 20px;\n    font-size: 18px;\n    font-style: italic;\n}\n\n",""]);const s=o}},t={};function e(a){var i=t[a];if(void 0!==i)return i.exports;var r=t[a]={id:a,exports:{}};return n[a](r,r.exports,e),r.exports}e.m=n,e.n=n=>{var t=n&&n.__esModule?()=>n.default:()=>n;return e.d(t,{a:t}),t},e.d=(n,t)=>{for(var a in t)e.o(t,a)&&!e.o(n,a)&&Object.defineProperty(n,a,{enumerable:!0,get:t[a]})},e.o=(n,t)=>Object.prototype.hasOwnProperty.call(n,t),e.p="/",e.b=document.baseURI||self.location.href,e.nc=void 0;var a=e(72),i=e.n(a),r=e(825),o=e.n(r),s=e(659),l=e.n(s),c=e(56),d=e.n(c),u=e(540),p=e.n(u),g=e(113),m=e.n(g),h=e(915),f={};f.styleTagTransform=m(),f.setAttributes=d(),f.insert=l().bind(null,"head"),f.domAPI=o(),f.insertStyleElement=p();i()(h.A,f);h.A&&h.A.locals&&h.A.locals;const y="https://npm.elemecdn.com/pjax@0.2.8/pjax.min.js",b=async()=>({Pjax:await new Promise(((n,t)=>{const e=document.createElement("script");e.src=y,e.onload=()=>n(window.Pjax),e.onerror=t,document.head.appendChild(e)}))});class x{constructor(n,t,e){this.tabList=document.querySelector(n),this.tabData=t,this.pjax=e,this.tabList&&(this.initTabs(),this.updateSelectedTab(window.location.pathname))}initTabs(){const n=this.tabData.map((n=>`\n            <li data-url="${n.url}" role="tab">\n                <a href="${n.url}" \n                   data-pjax \n                   data-lang-id="${n.text}"\n                   data-lang-params="[]"></a>\n            </li>\n        `)).join("");this.tabList.innerHTML=n,this.tabList.addEventListener("click",this.handleTabClick.bind(this))}async handleTabClick(n){const t=n.target.closest('[role="tab"]');if(!t)return;const e=t.dataset.url;if(e===window.location.pathname)return void n.preventDefault();n.preventDefault();const a=document.querySelector(".window");a&&a.classList.add("active"),this.updateSelectedTab(e);try{await this.pjax.loadUrl(e)}catch(n){}finally{a&&setTimeout((()=>{a.classList.remove("active")}),150)}}updateSelectedTab(n){this.tabList.querySelectorAll('[role="tab"]').forEach((t=>{const e=t.dataset.url,a=n===e;t.setAttribute("aria-selected",a),a?t.classList.add("active"):t.classList.remove("active")}))}}let w=!1,v=null,E=null;function S(){if(w)return;w=!0;const n=new Date,t=document.querySelector(".progress-container"),e=t?.clientWidth;if(!e)return void(w=!1);const a=Math.floor(e/30);function i(t,e,i,r){const o=(e-t)/6e4,s=(n-t)/6e4,l=Math.min(s/o*100,100),c=document.getElementById(i);if(!c)return void(w=!1);const d=Math.max(1,Math.floor(l/100*a)),u=document.getElementById(r);if(!u)return void(w=!1);u.innerHTML="",function n(t){if(t<d){const e=document.createElement("div");e.className="grid",u.appendChild(e),setTimeout((()=>n(t+1)),80*Math.random())}else w=!1}(0);let p=0;!function n(){p<l?(p+=1,c.textContent=`${Math.max(Math.floor(p),1)}%`,requestAnimationFrame(n)):c.textContent=`${Math.max(Math.floor(l),1)}%`}()}i(new Date(n.getFullYear(),0,1),new Date(n.getFullYear()+1,0,1),"progress-percentage","progress-bar"),i(new Date(n.getFullYear(),n.getMonth(),1),new Date(n.getFullYear(),n.getMonth()+1,1),"month-percentage","month-progress-bar"),i(new Date(n.getFullYear(),n.getMonth(),n.getDate()),new Date(n.getFullYear(),n.getMonth(),n.getDate()+1),"day-percentage","day-progress-bar"),function(){const n=()=>{v&&clearTimeout(v),E&&document.removeEventListener("visibilitychange",E)},t=()=>{const n=document.getElementById("refresh-timer"),e=document.getElementById("refresh-container"),a=new Date,i=3600-(60*a.getMinutes()+a.getSeconds());if(n){const t=Math.floor(i/60),a=i%60;LangManager.applyParameters(n,"index_refresh",t,a),e&&(e.style.display="flex")}if(i>0)v=setTimeout(t,1e3);else try{S();const n=document.getElementById("refresh-timer");n&&LangManager.applyParameters(n,"timer.refresh_complete",(new Date).toLocaleTimeString())}catch(n){}},e=(n,t=50)=>{const e=()=>{document.getElementById("refresh-timer")?n():setTimeout(e,t)};e()};E=()=>{"visible"===document.visibilityState&&e(t)},document.addEventListener("visibilitychange",E),n(),LangManager.isInitialized?e(t):LangManager.init().then((()=>e(t)))}()}const L=async()=>{try{const n=await fetch("/cfg/article_cfg.json");if(!n.ok)throw new Error("配置加载失败");return(await n.json()).map((({id:n,url:t,icon:e,name:a})=>({id:n,url:`/post/${t}/index.html`,icon:`/icon/${e}`,name:a||"未命名"})))}catch(n){return[]}},k=(n,{url:t,icon:e})=>{const a=document.createElement("div");return a.className="link-preview",a.innerHTML=`\n        <div class="link-container" data-url="${t}">\n            <span class="link-icon" style="background-image: url('${e}')"></span>\n            <p class="link-title">${n}</p>\n        </div>\n    `,a},C=(n,t,e)=>{n.addEventListener("click",(n=>{const a=n.target.closest(".link-container");a?.dataset.url&&(n.preventDefault(),t.loadUrl(a.dataset.url),e.updateSelectedTab(a.dataset.url))}))};class A{static DEFAULT_CONFIG={debug:!1,version:"3.1",fallbackLang:"en",storageKey:"lang_data_v8",langFile:"/cfg/lang_cfg.json",observerOptions:{subtree:!0,childList:!0,attributes:!0,attributeFilter:["data-lang-id"]},logger:console,placeholderFormats:["braced","numbered"]};constructor(n={}){this.config={...A.DEFAULT_CONFIG,...n},this.currentLang=this.config.fallbackLang,this.langData={},this.isInitialized=!1,this.domObserver=null,this.updateInProgress=!1,this.pendingUpdates=new Set,this.dynamicParams=new Map,this.paramCache=new Map}#n(...n){this.config.debug&&this.config.logger.log("%c[Lang]","color: #4CAF50;",...n)}#t(...n){this.config.logger.warn("%c[Lang]","color: #FFC107;",...n)}#e(...n){this.config.logger.error("%c[Lang]","color: #F44336;",...n)}#a(n,t,e){return this.#e(`Translation failed for ${t}:`,e),n&&(n.classList.add("lang-error"),n.setAttribute("title",`Translation error: ${t}`)),t}async#i(){try{const n=localStorage.getItem(this.config.storageKey);if(n){const{version:t,data:e}=JSON.parse(n);if(t===this.config.version)return this.langData=e,this.#n("Using cached language data"),!0}const t=await fetch(`${this.config.langFile}?v=${this.config.version}`);if(!t.ok)throw new Error(`HTTP ${t.status}`);const e=await t.json();return this.langData=e.reduce(((n,t)=>t.id?(n[t.id]=Object.entries(t).reduce(((n,[t,e])=>("id"!==t&&(n[t]=e),n)),{}),n):(this.#t("Skipping invalid entry:",t),n)),{}),localStorage.setItem(this.config.storageKey,JSON.stringify({version:this.config.version,data:this.langData})),!0}catch(n){return this.#e("Language data load failed:",n),this.langData={},!1}}#r(n,t=[]){return t.length?t.reduce(((n,t,e)=>(this.config.placeholderFormats.includes("braced")&&(n=n.replace(new RegExp(`\\{${e}\\}`,"g"),t)),this.config.placeholderFormats.includes("numbered")&&(n=n.replace(new RegExp(`%${e+1}\\$s`,"g"),t)),n)),n):n}#o(){if(this.updateInProgress)return;this.updateInProgress=!0,this.pendingUpdates.forEach((n=>{this.#s(n)})),this.pendingUpdates.clear();document.querySelectorAll("[data-lang-id]").forEach((n=>{this.#s(n)})),this.updateInProgress=!1}#s(n){const t=n.dataset.langId;if(!t)return;const e=this.langData[t]||{};let a=e[this.currentLang]||e[this.config.fallbackLang]||t;const i=[...this.dynamicParams.get(t)||[],...JSON.parse(n.dataset.langParams||"[]")],r="INPUT"===n.tagName||"TEXTAREA"===n.tagName?"value":"textContent";try{a=this.#r(a,i),n[r]=a}catch(e){this.#a(n,t,e),n[r]=t}}#l(){const n=document.getElementById("lang-switcher");if(!n)return;const t=n.cloneNode(!0);n.parentNode.replaceChild(t,n),t.value!==this.currentLang&&(t.value=this.currentLang),t.addEventListener("change",(async n=>{const t=n.target.value;t!==this.currentLang&&(this.#n(`Switching language to: ${t}`),this.currentLang=t,localStorage.setItem("user_lang",t),this.paramCache.clear(),this.#o())}))}#c(){this.domObserver||(this.domObserver=new MutationObserver((n=>{if(this.updateInProgress)return void n.forEach((n=>{"childList"===n.type?n.addedNodes.forEach((n=>{if(n.nodeType===Node.ELEMENT_NODE){n.hasAttribute("data-lang-id")&&this.pendingUpdates.add(n);n.querySelectorAll("[data-lang-id]").forEach((n=>this.pendingUpdates.add(n)))}})):"attributes"===n.type&&this.pendingUpdates.add(n.target)}));n.some((n=>"childList"===n.type&&Array.from(n.addedNodes).some((n=>n.nodeType===Node.ELEMENT_NODE&&(n.hasAttribute("data-lang-id")||n.querySelector("[data-lang-id]"))))||"attributes"===n.type&&"data-lang-id"===n.attributeName))&&(this.#o(),this.#l())})),this.domObserver.observe(document.documentElement,this.config.observerOptions))}applyParameters(n,t,...e){try{n.dataset.langId||(n.dataset.langId=t),this.dynamicParams.set(t,e);const a=this.translate(t,...e);return n["INPUT"===n.tagName||"TEXTAREA"===n.tagName?"value":"textContent"]=a,!0}catch(e){return this.#a(n,t,e),!1}}bindDynamicElement(n,t,e){document.querySelectorAll(n).forEach((n=>{n.dataset.langId=t,this.dynamicParams.set(t,e(n)),this.pendingUpdates.add(n)})),this.#o()}cachedTranslate(n,...t){const e=`${n}_${t.join("_")}`;return this.paramCache.has(e)||this.paramCache.set(e,this.translate(n,...t)),this.paramCache.get(e)}async init(n=this.config.fallbackLang){this.isInitialized||(await new Promise((n=>{"complete"===document.readyState?n():window.addEventListener("load",n)})),this.currentLang=localStorage.getItem("user_lang")||n,await this.#i(),this.#o(),this.#l(),this.#c(),this.isInitialized=!0,this.#n("Initialization complete"))}translate(n,...t){const e=this.langData[n]||{},a=e[this.currentLang]||e[this.config.fallbackLang]||n;return this.#r(a,t)}setLanguage(n){n!==this.currentLang&&(this.currentLang=n,localStorage.setItem("user_lang",n),this.paramCache.clear(),this.dynamicParams.forEach(((n,t)=>{document.querySelectorAll(`[data-lang-id="${t}"]`).forEach((n=>this.pendingUpdates.add(n)))})),this.#o())}getCurrentLang(){return this.currentLang}setParams(n,t=[]){Array.isArray(t)||(t=[t]),this.dynamicParams.set(n,t);document.querySelectorAll(`[data-lang-id="${n}"]`).forEach((n=>this.pendingUpdates.add(n))),this.updateInProgress||this.#o()}clearParams(n){this.dynamicParams.delete(n),this.setParams(n,[])}async reload(){await this.#i(),this.paramCache.clear(),this.#o()}configure(n){Object.assign(this.config,n)}enableDebug(n=!0){this.config.debug=n}}const I=new A;"undefined"==typeof window||window.LangManager||(window.LangManager=I);const M=I;function T(){const n=document.querySelector(".dynamic-footer");if(!n)return;const t=window.location.href.includes("post"),e=`\n      <div class="status-bar">\n        <p class="status-bar-field" data-lang-id="footer_name"></p>\n        <p class="status-bar-field" data-lang-id="footer_art"></p>\n        ${t?"":'<p class="status-bar-field" id="last-updated" data-lang-id="footer_update_time"></p>'}\n      </div>\n    `;if(n.innerHTML=e,!t){const t=n.querySelector("#last-updated"),e=async()=>{try{const n=await async function(){const n="https://api.github.com/repos/jianzou1/drunkfrog",t="lastUpdatedDate",e=36e5,a=localStorage.getItem(t);if(a){const{timestamp:n,date:t}=JSON.parse(a);if(Date.now()-n<e)return t}const i=await fetch(n);if(!i.ok)throw new Error(M.translate("errors.api_fetch",i.status));const r=await i.json(),o=new Date(r.updated_at).toLocaleString([],{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"});return localStorage.setItem(t,JSON.stringify({timestamp:Date.now(),date:o})),o}();M.applyParameters(t,"footer_update_time",n)}catch(n){M.applyParameters(t,"footer_update_time","---")}};M.isInitialized?e():M.init().then(e)}}function D(){const n=document.querySelector(".back-to-top");window.scrollY>300?n.style.display="block":n.style.display="none",n.onclick=function(){window.scrollTo({top:0,behavior:"smooth"})}}function N(){document.addEventListener("DOMContentLoaded",$)}document.addEventListener("DOMContentLoaded",(function(){window.addEventListener("scroll",D),D()}));const _=1;async function $(){const n=Date.now(),t=localStorage.getItem("dailyPopupLastShown"),e=t?new Date(t).getTime():0;(!t||(n-e)/1e3>=_)&&await async function(n,t,e){try{const e=await fetch(n);if(!e.ok)throw new Error(`Network response was not ok: ${e.statusText}`);t(await e.text())}catch(n){e?.(n)}}("/ui/dailyPopup.html",O,(n=>{}))}function O(n){const t=(new DOMParser).parseFromString(n,"text/html"),e=document.createElement("div");e.innerHTML=t.body.innerHTML,document.body.appendChild(e),t.querySelectorAll("style").forEach((n=>{document.head.querySelector(`style[data-id="${n.getAttribute("data-id")}"]`)||document.head.appendChild(n)})),t.querySelectorAll("script").forEach((n=>{if(!document.body.querySelector(`script[data-id="${n.getAttribute("data-id")}"]`)){const t=document.createElement("script");t.textContent=n.textContent,document.body.appendChild(t)}})),function(){const n=document.getElementById("close-popup"),t=document.getElementById("overlay"),e=document.getElementById("welcome-popup");if(!n||!t||!e)return;const a=n=>{"Escape"!==n.key&&27!==n.keyCode||P()};document.addEventListener("keydown",a);const i=P;let r=!1;P=()=>{r||(r=!0,document.removeEventListener("keydown",a),i())},n.addEventListener("click",P),t.addEventListener("click",P),e.addEventListener("click",(n=>n.stopPropagation()))}(),localStorage.setItem("dailyPopupLastShown",(new Date).toISOString())}function P(){const n=document.getElementById("overlay"),t=document.getElementById("welcome-popup");n&&(n.style.display="none"),t&&(t.style.display="none")}window.closePopup=P,N();let q=null,j=null;function B(){let n=[],t={},e=[];function a(t){let a;"按游戏评级排序"===t?a=function(){const t=n.reduce(((n,t)=>{const e=String(t.quality||"0");return n[e]||(n[e]=[]),n[e].push(t),n}),{}),a=[];return e.forEach((({key:n})=>{t[n]&&(a.push({key:n,games:t[n].sort(((n,t)=>t.time-n.time))}),delete t[n])})),Object.entries(t).sort(((n,t)=>t[0].localeCompare(n[0]))).forEach((([n,t])=>{a.push({key:n,games:t})})),a}():"按游戏类型排序"===t?a=i():"按游戏时长排序"===t&&(a=[...n].sort(((n,t)=>t.time-n.time))),r(a,t)}function i(){const t=function(n){return n.reduce(((n,t)=>{const e=t.type,a=t.seriesTag||"无系列";return n[e]=n[e]||{},n[e][a]=n[e][a]||[],n[e][a].push(t),n}),{})}(n);return Object.keys(t).forEach((n=>{Object.keys(t[n]).forEach((e=>{t[n][e].sort(((n,t)=>t.time-n.time))}))})),Object.keys(t).forEach((n=>{const e=Object.keys(t[n]);e.sort(((e,a)=>{const i=Math.max(...t[n][e].map((n=>n.time)));return Math.max(...t[n][a].map((n=>n.time)))-i})),t[n]=e.reduce(((e,a)=>(e[a]=t[n][a],e)),{})})),t}function r(n,a){const i=document.querySelector(".game-list");let r;r="按游戏评级排序"===a?n.map((({key:n,games:t})=>{const a=e.find((t=>t.key===n));return`<h3>${a?a.value:`未定义评级（${n}）`}</h3>${t.map(o).join("")}`})).join(""):"按游戏类型排序"===a?function(n,t={}){return Object.entries(n).map((([n,e],a,i)=>{const r=Object.entries(e).map((([n,t])=>t.map(o).join(""))).join("");return`<h3>${t[n]||""}</h3>${r}${a<i.length-1?"<hr>":""}`})).join("")}(n,t):Array.isArray(n)?n.map(o).join(""):"",i.innerHTML=r||"",i.querySelectorAll("li").forEach(((n,t)=>{setTimeout((()=>n.classList.add("flip-in")),12*t)}))}function o(n){const t=n.isLoved?"💜":"",e=n.sign||"",a=n.spacialAchievements?"🏆":"",i=n.spacialAchievements?n.spacialAchievements.replace(/\n/g,"<br>"):"",r=/^[A-Za-z0-9\s]+$/.test(n.name)?`<i>${n.name}</i>`:n.name;return`\n            <li class="${`quality-${n.quality||1}`}" ${i?'onclick="toggleAchievement(this)"':""}>\n                <span>\n                    <strong>${r}</strong> ${t} ${a}\n                </span>\n                <span>${e} ${n.time}小时 <span class="toggle-icon">${i?"🙈":""}</span></span>\n                <div class="achievement" style="display: none;">${i}</div>\n            </li>\n        `}!async function(){try{const l=await async function(n){try{const t=await fetch(n);if(!t.ok)throw new Error(`网络错误: ${t.status}`);return t.json()}catch(n){throw n}}("/cfg/game_time_cfg.json");s=l[0][0].typeName,t=Object.fromEntries(s.split(",").map((n=>{const[t,e]=n.split(":");return[t.trim(),e.trim()]}))),o=l[0][0].qualityName,e=o.split(",").map((n=>{const[t,e]=n.trim().split(":");return{key:t.trim(),value:e.trim()}})),n=l[1]||[];const c=function(n){const t=n.reduce(((n,t)=>n+t.time),0),e=Math.floor(t/24),a=(t/24/365).toFixed(2);return{totalTime:t,totalDays:e,totalYears:a}}(n);!function({totalTime:n,totalDays:t,totalYears:e}){const a=(n,t)=>{try{const e=document.querySelector(`[data-lang-id="${n}"]`);e&&(e.dataset.langParams=JSON.stringify([t]),M.setParams(n,[t]))}catch(n){}};a("total_time",n),a("equivalent_days",t),a("equivalent_years",e),r(i())}(c),a("按游戏评级排序")}catch(n){}var o;var s}(),document.querySelectorAll('input[name="sort-option"]').forEach((n=>{n.addEventListener("change",(n=>{a(n.target.value)}))})),window.toggleAchievement=function(n){const t=n.querySelector(".achievement"),e=n.querySelector(".toggle-icon");if(!t)return;const a=n.nextElementSibling;if(a&&a.classList.contains("achievement-info"))a.remove(),e.innerHTML=t.innerHTML?"🙈":"";else{const i=document.createElement("div");i.className="achievement-info",i.innerHTML=t.innerHTML,n.parentNode.insertBefore(i,a),e.innerHTML="👀"}}}function z(){const n="/cfg/game_time_cfg.json",t=3,e=100,a=1500,i=30,r={isRolling:!1,gameData:[],currentWinner:null,loopData:[],currentPos:0,uniqueId:Date.now(),retryCount:0},o={rollBtn:null,result:null,container:null,items:[]},s={height:`${i}px`,lineHeight:`${i}px`,position:"absolute",width:"100%",transition:"transform 0.1s",willChange:"transform",backfaceVisibility:"hidden"};function l(){!r.isRolling&&r.gameData.length&&(p(),u())}function c(){o.result.innerHTML='<div class="error">系统初始化失败，请检查网络</div>'}function d(n={}){const{includeWinner:t=!0}=n,a=m([...r.gameData]),i=[],o=new Set;for(t&&r.currentWinner&&(i.push(r.currentWinner),o.add(r.currentWinner.name));i.length<e;){const n=a.filter((n=>!o.has(n.name)));if(0===n.length)break;const t=n[Math.floor(Math.random()*n.length)];i.push(t),o.add(t.name)}return m(i)}function u(){r.retryCount>3?r.isRolling=!1:(p(),r.currentWinner=function(){if(!r.gameData.length)return{name:"默认中奖",quality:1,_uid:++r.uniqueId};const n=r.gameData.map((n=>Math.pow(2,n.quality))),t=n.reduce(((n,t)=>n+t),0);let e=Math.random()*t;for(let t=0;t<r.gameData.length;t++){if(e<n[t])return r.gameData[t];e-=n[t]}return r.gameData[0]}(),r.currentWinner?(r.loopData=d(),r.retryCount++,r.loopData.some((n=>n._uid===r.currentWinner._uid&&n.name===r.currentWinner.name))?(r.retryCount=0,r.currentPos=0,g(),function(n){let t=null;const e=r.currentPos,s=l=>{t||(t=l);const c=l-t,d=Math.min(c/a,1),u=1-Math.pow(1-d,3);r.currentPos=e+n*u,g(),d<1?requestAnimationFrame(s):requestAnimationFrame((()=>{const n=o.result.offsetHeight,t=r.loopData.findIndex((n=>n._uid===r.currentWinner._uid)),e=Math.round(t*i-(n/2-i/2));r.currentPos=e,g();const a=document.getElementById("story");a&&(a.style.animation="none",a.offsetWidth,r.currentWinner?.story?a.textContent=r.currentWinner.story:a.textContent=" "),r.isRolling=!1}))};requestAnimationFrame(s)}(function(){const n=o.result.offsetHeight,t=r.loopData.findIndex((n=>n._uid===r.currentWinner._uid));return Math.round(t*i-(n/2-i/2))+e*i}())):u()):r.isRolling=!1)}function p(){o.result.offsetHeight,r.isRolling=!0;const n=document.getElementById("story");n&&(n.textContent=" ",n.style.animation="")}function g(){const n=r.loopData.length*i,t=(r.currentPos%n+n)%n,e=Math.floor(t/i),a=Math.round(t%i),s=Math.round(o.result.offsetHeight/2-i/2);o.items.forEach(((n,t)=>{const o=(e+t)%r.loopData.length,l=r.loopData[o],c=Math.round(t*i-a-s);n.textContent=l?.name||`游戏${t+1}`,n.className=`scroll-item quality-${l?.quality||1}`,n.style.transform=`translateY(${c}px)`,r.currentWinner&&l?._uid===r.currentWinner._uid?(n.style.fontWeight="bold",n.style.boxShadow="0 2px 8px rgba(255, 215, 0, 0.5)"):(n.style.fontWeight="",n.style.boxShadow="")}))}function m(n){for(let t=n.length-1;t>0;t--){const e=Math.floor(Math.random()*(t+1));[n[t],n[e]]=[n[e],n[t]]}return n}new Promise(((n,t)=>{let e=0;const a=()=>{o.rollBtn=document.getElementById("gameRollBtn"),o.result=document.getElementById("gameResult"),o.rollBtn&&o.result?n():e++<20?setTimeout(a,50):t(new Error("DOM元素加载超时"))};a()})).then((()=>{!function(){o.container=document.createElement("div"),o.container.className="scroll-container",o.container.style.height=i*t+"px";const n=t+4;o.items=Array.from({length:n},((n,t)=>{const e=document.createElement("div");return e.className="scroll-item",Object.assign(e.style,s),e.textContent=`游戏${t+1}`,e})),o.result.appendChild(o.container),o.container.append(...o.items)}(),async function(){try{const t=new AbortController,a=setTimeout((()=>t.abort()),5e3),i=await fetch(n,{signal:t.signal});clearTimeout(a);const s=await i.json();!function(n){if(!n?.[1])throw new Error("无效的游戏数据格式")}(s),r.gameData=m(s[1]).map((n=>({...n,_uid:++r.uniqueId}))),r.loopData=r.gameData.length?d({includeWinner:!1}):Array.from({length:e},((n,t)=>({name:`游戏${t+1}`,quality:1,_uid:++r.uniqueId}))),g(),o.rollBtn.disabled=!1}catch(n){o.result.innerHTML='<div class="error">数据加载失败，请刷新页面</div>',o.rollBtn.disabled=!0}}(),o.rollBtn.addEventListener("click",l)})).catch(c)}const F="/cfg/gallery_cfg.json";async function R(){const n=document.getElementById("gallery-images"),t=document.getElementById("prevPage"),e=document.getElementById("nextPage"),a=document.getElementById("pageIndicator"),i=document.getElementById("titleSelect"),r=document.getElementById("topTitleDisplay"),o=document.getElementById("imageModal"),s=document.getElementById("modalImage"),l=document.getElementById("caption"),c=document.getElementById("modalClose");let d=1,u=[],p="",g=1;try{const n=await async function(){const n=await fetch(F);if(!n.ok)throw new Error("网络错误，请重试");return await n.json()}();p=n[0][0]?.additional||"",u=n[1],m=u,[...new Set(m.map((n=>n.title)))].forEach((n=>{const t=m.filter((t=>t.title===n)).length,e=document.createElement("option");e.value=n,e.textContent=`${n} (${t}p)`,i.appendChild(e)})),i.addEventListener("change",(function(){d=1,h()})),c.addEventListener("click",y),window.addEventListener("click",(function(n){n.target===o&&y()})),t.addEventListener("click",(()=>b(-1))),e.addEventListener("click",(()=>b(1))),h()}catch(n){alert("加载失败: "+n.message)}var m;function h(){n.innerHTML="";const o=i.value,s=u.filter((n=>n.title===o));g=Math.max(...s.map((n=>n.page)))||1;s.filter((n=>n.page===d)).forEach(f),a.textContent=`${d} / ${g} `,r.textContent=`${o}`,function(){const n=document.querySelectorAll("#gallery-images img"),t=new IntersectionObserver((n=>{n.forEach((n=>{if(n.isIntersecting){const e=n.target;e.src=e.getAttribute("data-src"),e.onload=()=>{e.style.opacity=1},t.unobserve(e)}}))}));n.forEach((n=>t.observe(n)))}(),t.disabled=1===d,e.disabled=d===g}function f(t){const e=document.createElement("img");e.setAttribute("data-src",t.url+p),e.alt=t.mark,e.title=t.mark,e.style.opacity=0,e.addEventListener("click",(()=>function(n){s.src=n.url,l.textContent=n.mark,o.style.display="flex"}(t))),n.appendChild(e)}function y(){o.style.display="none"}function b(n){d+=n,h()}}const H={CANVAS_CLASS:"crt-effect",CHECKBOX_ID:"crtToggle",STORAGE_KEY:"crtEffectEnabled",SCAN_LINE:{INTERVAL:4,SPEED:.06,COLORS:["rgba(255, 0, 0, 0.08)","rgba(0, 255, 0, 0.08)","rgba(0, 0, 255, 0.08)"],OSCILLATION:{FREQ:50,AMP:.2}}};function U(){const n=document.querySelector(`.${H.CANVAS_CLASS}`);if(!n)return;const t=n.getContext("2d");let e=!0,a=null,i=null,r=null,o=0;const s=()=>{if(e){n.width===window.innerWidth&&n.height===window.innerHeight||(n.width=window.innerWidth,n.height=window.innerHeight),t.clearRect(0,0,n.width,n.height),t.fillStyle="rgba(0, 0, 0, 0.05)",t.fillRect(0,0,n.width,n.height);for(let e=0;e<n.height;e+=H.SCAN_LINE.INTERVAL){const a=o%H.SCAN_LINE.INTERVAL;H.SCAN_LINE.COLORS.forEach(((i,r)=>{const o=a+Math.sin(e/H.SCAN_LINE.OSCILLATION.FREQ)*H.SCAN_LINE.OSCILLATION.AMP+.3*r;t.fillStyle=i,t.fillRect(0,(e+o)%n.height,n.width,1)}))}o+=H.SCAN_LINE.SPEED,a=requestAnimationFrame(s)}},l=()=>{a&&(cancelAnimationFrame(a),a=null,t.clearRect(0,0,n.width,n.height))},c=n=>{try{localStorage.setItem(H.STORAGE_KEY,JSON.stringify(n))}catch(n){}},d=n=>{const t=n.target.checked;t!==e&&(e=t,c(t),t?s():l())},u=()=>{r&&(r.disconnect(),r=null)},p=()=>{i=document.getElementById(H.CHECKBOX_ID),i&&(i&&(i.removeEventListener("change",d),i.addEventListener("change",d),i.checked=e),u())},g=()=>{e=(()=>{try{const n=localStorage.getItem(H.STORAGE_KEY);return null===n||JSON.parse(n)}catch(n){return!0}})(),p(),i||r||(r=new MutationObserver((n=>{for(const t of n)if("childList"===t.type){const n=t.addedNodes;for(const t of n)if(t.id===H.CHECKBOX_ID||t.contains?.(document.getElementById(H.CHECKBOX_ID)))return void p()}})),r.observe(document.body,{childList:!0,subtree:!0,attributeFilter:["id"]})),e&&s(),window.addEventListener("resize",(()=>{e&&s()}),{passive:!0})};return"loading"===document.readyState?document.addEventListener("DOMContentLoaded",g,{once:!0}):g(),{enable:()=>{e||(e=!0,c(!0),i?(i.checked=!0,requestAnimationFrame(s)):s())},disable:()=>{e&&(e=!1,c(!1),i&&(i.checked=!1),l())},destroy:()=>{l(),u(),i&&i.removeEventListener("change",d),window.removeEventListener("resize",s),window.removeEventListener("DOMContentLoaded",g)}}}const W=["/ui/ascii1.txt","/ui/ascii2.txt"],Y=async()=>{const n=(()=>{const n=Math.floor(Math.random()*W.length);return W[n]})(),t=await fetch(n),e=await t.text(),a=document.querySelector(".logo");if(a){let n=a.querySelector(".text-container");n||(n=document.createElement("div"),n.classList.add("text-container"),a.appendChild(n)),n.textContent=e;const t=a.offsetWidth,i=document.createElement("span");i.textContent=e,i.style.fontFamily="Courier New, Courier, monospace",i.style.fontSize="14px",i.style.whiteSpace="pre",document.body.appendChild(i);const r=i.offsetWidth;document.body.removeChild(i);const o=t/r;n.style.transform=`translate(-50%, -50%) scale(${o})`}};(async()=>{try{await M.init(),Y();const{Pjax:n}=await b(),t=new n({selectors:["head title","#main"],cacheBust:!1}),e=[{url:"/",text:"tab_progress"},{url:"/page/article.html",text:"tab_article"},{url:"/page/game.html",text:"tab_game"},{url:"/page/gallery.html",text:"tab_gallery"},{url:"/page/about.html",text:"tab_about"}],a=new x('[role="tablist"]',e,t);document.addEventListener("pjax:complete",(()=>{i()}));const i=()=>{try{switch(window.location.pathname){case"/":S(),N();break;case"/page/article.html":!async function(n,t){const e=await L(),a=document.getElementById("links-container");a&&(a.innerHTML="",e.forEach((n=>{a.appendChild(k(n.name,{url:n.url,icon:n.icon}))})),C(a,n,t))}(t,a);break;case"/page/game.html":B(),z();break;case"/page/gallery.html":R()}T(),D(),async function(){await M.init(),j=document.getElementById("tips");const n=n=>{n.forEach((n=>{n.addEventListener("mouseenter",t),n.addEventListener("mouseleave",e)}))},t=n=>{q=n.target,a(),i(),j.style.display="block",j.style.opacity=1},e=()=>{q=null,j.style.display="none",j.style.opacity=0},a=()=>{if(!q)return;const n=q.getAttribute("data-tips");j.textContent=M.translate(n)},i=()=>{if(!q)return;const n=q.getBoundingClientRect();j.style.left=`${n.left+window.scrollX+80}px`,j.style.top=`${n.bottom+window.scrollY+0}px`};document.addEventListener("languageChanged",(()=>{q&&"block"===j.style.display&&(a(),i())}));const r=document.querySelectorAll("[data-tips]");n(r);new MutationObserver((t=>{t.forEach((t=>{"childList"===t.type&&t.addedNodes.forEach((t=>{if(t.nodeType===Node.ELEMENT_NODE){t.hasAttribute("data-tips")&&n([t]);const e=t.querySelectorAll("[data-tips]");n(e)}}))}))})).observe(document.body,{childList:!0,subtree:!0})}(),U();const n=document.querySelector('[role="tablist"]');n&&(n.innerHTML="",new x('[role="tablist"]',e,t))}catch(n){}},r=document.querySelector(".logo");r&&r.addEventListener("click",(n=>{n.preventDefault(),t.loadUrl("/"),a.updateSelectedTab("/")})),i()}catch(n){}})()})();