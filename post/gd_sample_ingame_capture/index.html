<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="referrer" content="no-referrer">
<title>占领模式战场规则</title>
  <link rel="icon" type="image/png" href="/favicon/favicon-96x96.png" sizes="96x96" />
  <link rel="icon" type="image/svg+xml" href="/favicon/favicon.svg" />
  <link rel="shortcut icon" href="/favicon/favicon.ico" />
  <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png" />
  <link rel="manifest" href="/site.webmanifest" />
  <link rel="stylesheet" href="/styles.css">
  <script type="module" src="/main.js" defer></script>
</head>
<body>
  <div class="logo"></div>
  <main id="main" class="main">
    <div class="window">
      <div class="title-bar">
<div class="title-bar-text" id="dynamic-title">占领模式战场规则</div>
        <div class="title-bar-controls">
          <button aria-label="Close" onclick="window.history.back()"></button>
        </div>
      </div>
<div class="window-body"><h2 id='一设计目的'>一、设计目的</h2>
<p>引入新的战场玩法，以增加游戏的多样性，提高竞技趣味，并促进游戏长期玩家留存。</p>
<h2 id='二功能概述'>二、功能概述</h2>
<p>占领模式的玩法规则规则、功能交互，明确定义占领模式的胜负规则以及玩家的体验流程。</p>
<h2 id='三功能规则'>三、功能规则</h2>
<h4 id='31-占领模式玩法规则'>3.1 占领模式玩法规则</h4>
<ul>
<li>占领模式中，战场上散布着多个占领点，每个占领点每秒都会产生一定数量的胜利点数。胜利的关键在于，当任意一队的胜利点数首先达到设定值时，该队将获胜。游戏的核心目标是争夺这些占领点，需要不断争夺和保卫以保持领先地位。</li>

</ul>
<h4 id='32-占领点预制'>3.2 占领点预制</h4>
<ul>
<li><p>占领点将采用触发器（Trigger）的预制体，用于在客户端检测触发器范围内的队伍数量，从而实现占领交互。占领区域的大小将由触发器预制体的碰撞范围决定。</p>
</li>
<li><p>占领状态将分为3个状态，一旦变为已占领状态，将无法再次变回中立状态，只能更改占领点的归属方：</p>
<ul>
<li>中立状态（灰色）：初始状态，不产生胜利点数。</li>
<li>我方状态（蓝色）：已占领，产生胜利点数，计入我方队伍。</li>
<li>敌方状态（红色）：已占领，产生胜利点数，计入敌方队伍。</li>

</ul>
</li>
<li><p>占领规则包括以下情况：</p>
<ul>
<li><p>中立状态下：</p>
<ul>
<li><p>场景1：当占领区域内只有1个队伍时，开始占领。占领时间应从触发器的<code>captureTime</code>字段读取（单位：毫秒）。占领时间结束后，占领点的归属将变为触发占领时间的队伍（不属于该队伍的占领点才会触发<code>captureTime</code>的计算）。</p>
</li>
<li><p>在占领过程中，如果占领点内的队伍之一离开该区域，则该队伍的<code>captureTime</code>将逐渐重置为0。</p>
</li>
<li><p>场景2：如果占领过程中，占领区域内有其他队伍进入，占领将暂停。占领时间会继续计算，但只有占领点内只有1个队伍时，占领时间才能继续计算。</p>
</li>
<li><p>场景3：如果A队伍占领一个点，B队伍进入该区域并驱逐A队伍，需要等待已经计算的<code>captureTime</code>逐渐重置为0，才能再次触发<code>captureTime</code>。</p>
<ul>
<li>如果在此过程中，A队伍重新进入占领区域，清零过程将暂停。此时，A队伍将B队伍的玩家驱逐出占领点，清零的<code>captureTime</code>会逐渐回满。</li>

</ul>
</li>

</ul>
</li>
<li><p>已占领状态下：</p>
<ul>
<li><p>场景1：当占领区域内没有我方玩家，敌对玩家进入占领区域，开始占领。占领时间将从触发器的<code>captureTime</code>字段读取（以毫秒为单位）。占领时间结束后，占领点的归属将变为触发占领时间的队伍（不属于该队伍的占领点才会触发<code>captureTime</code>的计算）。</p>
</li>
<li><p>场景2：占领过程中，占领区域内有其他队伍进入，占领将暂停。只有在占领点内只有敌对队伍时，占领时间才会继续计算。</p>
</li>
<li><p>场景3：占领过程中，如果敌对队伍的玩家被驱逐出占领区域，已经计算的<code>captureTime</code>将逐渐重置为0。</p>
<ul>
<li>如果在清零期间，敌对队伍重新进入占领区域，清零进程将暂停。</li>

</ul>
</li>

</ul>
</li>

</ul>
</li>
<li><p>占领点会根据占领预制体的<code>getPointPerSecond</code>字段，每秒为占领点的归属方增加胜利点数。每秒都会计算每支队伍拥有的占领点，从而决定胜利点数。</p>
</li>
<li><p>占领点的UI样式将包括以下元素：</p>
<ul>
<li>占领点名称：通过<code>name#string</code>字段配置，用于在UI中显示，只允许填写大写英文字母A-Z。</li>
<li>占领点图标样式：在预制体内提供下拉选项，包括L/S/M，用于控制占领点图标的UI位置。</li>

</ul>
</li>

</ul>
<h4 id='33-胜负与结算规则'>3.3 胜负与结算规则</h4>
<p>触发结算条件：</p>
<ol start='' >
<li><p>战场时间限制（<code>roundTime#float</code>）内，任何一方率先达到<code>occupyWinPoint#int</code>的胜利点数，即可获胜。</p>
<ul>
<li>胜利方：达到胜利点数的一方将获胜。</li>
<li>失败方：结算时拥有的胜利点数较少的一方将失败。</li>

</ul>
</li>
<li><p>如果在战场的时间限制（<code>roundTime#float</code>）内，没有任何一方达到胜利点数，比赛将在时间结束后进行结算。</p>
<ul>
<li>胜利方：在结算时拥有胜利点数更多的一方将获胜。</li>
<li>失败方：在结算时拥有胜利点数较少的一方将失败。</li>

</ul>
</li>

</ol>
<h4 id='34-占领模式配置'>3.4 占领模式配置</h4>
<ul>
<li><p>占领点预制将包括以下字段以支持功能实现：</p>
<figure class='table-figure'><table>
<thead>
<tr><th>字段名</th><th>类型</th><th>描述</th></tr></thead>
<tbody><tr><td>captureTime</td><td>int</td><td>占领时间（毫秒）</td></tr><tr><td>getPointPerSecond</td><td>int</td><td>每秒获得的胜利点数</td></tr><tr><td>pic</td><td>string</td><td>占领点图片路径（数组，每个状态有3张图）</td></tr></tbody>
</table></figure>
</li>
<li><p>客户端战局配置：</p>
<ul>
<li>引入占领模式配置表：<code>capture_target_cfg</code>，用于配置占领模式的相关信息。</li>
<li>以下是新增字段：</li>

</ul>
<figure class='table-figure'><table>
<thead>
<tr><th style='text-align:left;' >字段名</th><th>类型</th><th>描述</th><th>备注</th></tr></thead>
<tbody><tr><td style='text-align:left;' >occupyWinPoint</td><td>int</td><td>胜利点数</td><td>新增字段</td></tr><tr><td style='text-align:left;' >occupyPointFx</td><td>string</td><td>胜利点数增长特效，配置数组，大于等于该分数展示的特效</td><td>新增字段</td></tr><tr><td style='text-align:left;' >roundTime</td><td>float</td><td>比赛时长</td><td>复用</td></tr><tr><td style='text-align:left;' >noticeSelfTeamScoreHalf</td><td>int</td><td>通知-我方获胜进度已过半<br />我方拥有胜利点数大于等于occupyWinPoint/2时</td><td>规则变更</td></tr><tr><td style='text-align:left;' >noticeEnemyTeamSocreHalf</td><td>int</td><td>通知-敌方获胜进度已过半<br />对方拥有胜利点数大于等于occupyWinPoint/2时</td><td>规则变更</td></tr><tr><td style='text-align:left;' >noticeWinRemain</td><td>int</td><td>通知-再击败{0}名敌人即可获胜 <strong>--&gt;</strong> 通知-再获得{0}分数即可获胜</td><td>规则变更</td></tr><tr><td style='text-align:left;' >occupyWeaponDelTime</td><td>int</td><td>占领模式武器掉落消失时间</td><td>新增字段</td></tr><tr><td style='text-align:left;' >occupyResurgenceType</td><td>int</td><td>占领模式死亡后复活方式</td><td>新增字段</td></tr><tr><td style='text-align:left;' >occupyResurgenceTime</td><td>int</td><td>占领模式复活等待时间</td><td>新增字段</td></tr><tr><td style='text-align:left;' >occupyResurgenceBuff</td><td>int</td><td>占领模式复活时添加buffId</td><td>新增字段</td></tr></tbody>
</table></figure>
</li>
<li><p>战服与平台配置：</p>
<ul>
<li>新增<code>gameId=5000</code>，表示占领玩法规则</li>
<li>新增<code>gameType=600</code>，表示占领游戏类型</li>

</ul>
</li>

</ul>
<h4 id='35-占领模式交互表现'>3.5 占领模式交互表现</h4>
<ul>
<li><p>不同状态的占领点样式</p>
<ul>
<li><p>我方点位：蓝色：</p>
<p><img src="https://image.baidu.com/search/down?url=https://fc.sinaimg.cn/large/00724HnBly1hish358y8mj31hc0r14qp.jpg" referrerpolicy="no-referrer" alt="image.png"></p>
</li>
<li><p>敌方点位：红色：</p>
<p><img src="https://image.baidu.com/search/down?url=https://fc.sinaimg.cn/large/00724HnBly1hisgy3g2hyj31hc0rab29.jpg" referrerpolicy="no-referrer" alt="image.png"></p>
</li>
<li><p>中立点位：灰色：</p>
<p><img src="https://image.baidu.com/search/down?url=https://fc.sinaimg.cn/large/00724HnBly1hisgrsg91vj31hc0rmb29.jpg" referrerpolicy="no-referrer" alt="image.png">点位进度条：根据不同队伍触发的<code>captureTime</code>，展示进度条，绕占领点底一周展示。</p>
</li>

</ul>
</li>
<li><p>模式UI：需要展示以下内容。</p>
<p><img src="https://image.baidu.com/search/down?url=https://fc.sinaimg.cn/large/00724HnBly1hish8s0lr2j30o5070wiw.jpg" referrerpolicy="no-referrer" alt="image.png"></p>
<ul>
<li><p>A 分数情况：分别展示两队的当前分数，需展示进度条与具体数值。</p>
</li>
<li><p>B 占领点情况：地图内所有点位的占领情况（我方归属、敌方归属、中立）。</p>
<ul>
<li>占领点图标根据占领点预制的pic字段展示。</li>

</ul>
</li>
<li><p>C 胜利点增加情况：每秒有跳字效果，根据当前不同的加分值展示不同特效，根据模式配置表的<code>occupyPointFx</code>字段索引特效。</p>
</li>
<li><p>占领过程：我方captureTime触发时，若角色在该占领区域内，则展示正在占领UI。</p>
<p><img src="https://image.baidu.com/search/down?url=https://fc.sinaimg.cn/large/00724HnBly1hishboqdf4j30nt0azjx7.jpg" referrerpolicy="no-referrer" alt="image.png"></p>
</li>
<li><p>占领点HUD界面：占领点上方需根据预制内的Pic配置，展示对应的HUD界面，实现方式参照血条。</p>

<li>显示层级：该HUD在场景中穿透墙壁，但会被任意Caster遮挡。</li>

</div>
    </div>
  </main>
  <canvas class="crt-effect"></canvas>
  <div id="tips" class="tips" style="display: none;"></div>
  <button class="back-to-top" onclick="scrollToTop()"><img src="/icon/go-top.png" alt="Back to Top" style="vertical-align: middle;"></button>
  <div class="crt monitor"></div>
  <div id="loading-container" style="display: none;"></div>
  <div class="dynamic-footer"></div>
</body>
</html>
